{"mappings":";;;;;AAGA;IACC,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC;IACtB,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC;IACtB,QAAQ,CAAC,cAAc,EAAE,MAAM,CAAC;IAChC,QAAQ,CAAC,aAAa,EAAE,MAAM,CAAC;IAC/B,QAAQ,CAAC,GAAG,EAAE,MAAM,CAAC;IACrB,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC;IACtB,QAAQ,CAAC,gBAAgB,EAAE,MAAM,CAAC;IAClC,QAAQ,CAAC,eAAe,EAAE,OAAO,CAAC;IAClC,QAAQ,CAAC,OAAO,EAAE,OAAO,GAAG,MAAM,CAAC;IACnC,QAAQ,CAAC,gBAAgB,EAAE,MAAM,CAAC;IAClC,QAAQ,CAAC,GAAG,CAAC,EAAE;QACd,GAAG,EAAE,MAAM,CAAC;QACZ,IAAI,EAAE,MAAM,CAAC;KACb,CAAC;IACF,QAAQ,CAAC,gBAAgB,CAAC,EAAE,MAAM,MAAM,CAAC;IACzC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,CAAC,OAAO,EAAE,aAAa,KAAK,eAAe,CAAC;IAC7E,QAAQ,CAAC,WAAW,EAAE,WAAW,CAAC;CAClC;ACdD;IACC,IAAI,SAAS;IACb,KAAK,UAAU;IACf,SAAS,cAAc;IACvB,KAAK,UAAU;IACf,MAAM,WAAW;IACjB,MAAM,WAAW;IACjB,SAAS,cAAc;IACvB,QAAQ,aAAa;IACrB,KAAK,UAAU;CACf;ACfD;IACC,QAAQ,CAAC,IAAI,EAAE,WAAW,CAAC;IAC3B,QAAQ,CAAC,GAAG,EAAE,MAAM,CAAC;IACrB,QAAQ,CAAC,GAAG,EAAE,MAAM,CAAC;IACrB,QAAQ,CAAC,OAAO,CAAC,EAAE,MAAM,GAAG,SAAS,CAAC;CACtC;AELD;IACC,KAAK,IAAI,MAAM,CAAC;IAEhB,QAAQ,IAAI,MAAM,CAAC;IAEnB,SAAS,IAAI,SAAS,GAAG,IAAI,CAAC;IAE9B,SAAS,CAAC,MAAM,EAAE,SAAS,GAAG,IAAI,GAAG,IAAI,CAAC;IAE1C,WAAW,IAAI,MAAM,CAAC;IAEtB,WAAW,CAAC,QAAQ,EAAE,MAAM,GAAG,IAAI,CAAC;IAEpC,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC;CACvB;AaCD;IACC,EAAE,CAAC,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,CAAC,MAAM,EAAE,OAAO,KAAK,IAAI,GAAG,IAAI,CAAC;IACnE,EAAE,CACD,KAAK,EAAE,SAAS,EAChB,QAAQ,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,KAAK,IAAI,GACpD,IAAI,CAAC;IACR,EAAE,CAAC,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,CAAC,MAAM,EAAE,OAAO,KAAK,IAAI,GAAG,IAAI,CAAC;IACnE,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC,MAAM,EAAE,KAAK,KAAK,IAAI,GAAG,IAAI,CAAC;CAC5D;ACXD,kCACC,MAAM,EAAE,MAAM,MAAM,GAAG,KAAK,MAAM,EAClC,OAAO,CAAC,EAAE,OAAO,CAAC,OAAO,CAAC,sCA2B1B;AAED,2BACC,OAAO,GAAE,OAAO,CAAC,OAAO,CAAM,EAC9B,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,MAAM,MAAM,GAAG,KAAK,MAAM,KAAK,IAAI,sCA6BvD","sources":["src/src/config/index.ts","src/src/enums.ts","src/src/models/message.ts","src/src/models/messageQueue.ts","src/src/models/client.ts","src/src/models/realm.ts","src/src/services/checkBrokenConnections/index.ts","src/src/messageHandler/handlers/heartbeat/index.ts","src/src/messageHandler/handlers/transmission/index.ts","src/src/messageHandler/handlers/index.ts","src/src/messageHandler/handler.ts","src/src/messageHandler/handlersRegistry.ts","src/src/messageHandler/index.ts","src/src/services/messagesExpire/index.ts","src/src/services/webSocketServer/index.ts","src/src/api/v1/public/index.ts","src/src/api/index.ts","src/src/instance.ts","src/src/index.ts","src/index.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"import express, { type Express } from \"express\";\r\nimport http from \"node:http\";\r\nimport https from \"node:https\";\r\n\r\nimport type { IConfig } from \"./config\";\r\nimport defaultConfig from \"./config\";\r\nimport type { PeerServerEvents } from \"./instance\";\r\nimport { createInstance } from \"./instance\";\r\nimport type { IClient } from \"./models/client\";\r\nimport type { IMessage } from \"./models/message\";\r\n\r\nexport type { MessageType } from \"./enums\";\r\nexport type { IConfig, PeerServerEvents, IClient, IMessage };\r\n\r\nfunction ExpressPeerServer(\r\n\tserver: https.Server | http.Server,\r\n\toptions?: Partial<IConfig>,\r\n) {\r\n\tconst app = express();\r\n\r\n\tconst newOptions: IConfig = {\r\n\t\t...defaultConfig,\r\n\t\t...options,\r\n\t};\r\n\r\n\tif (newOptions.proxied) {\r\n\t\tapp.set(\r\n\t\t\t\"trust proxy\",\r\n\t\t\tnewOptions.proxied === \"false\" ? false : !!newOptions.proxied,\r\n\t\t);\r\n\t}\r\n\r\n\tapp.on(\"mount\", () => {\r\n\t\tif (!server) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t\"Server is not passed to constructor - \" + \"can't start PeerServer\",\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tcreateInstance({ app, server, options: newOptions });\r\n\t});\r\n\r\n\treturn app as Express & PeerServerEvents;\r\n}\r\n\r\nfunction PeerServer(\r\n\toptions: Partial<IConfig> = {},\r\n\tcallback?: (server: https.Server | http.Server) => void,\r\n) {\r\n\tconst app = express();\r\n\r\n\tlet newOptions: IConfig = {\r\n\t\t...defaultConfig,\r\n\t\t...options,\r\n\t};\r\n\r\n\tconst port = newOptions.port;\r\n\tconst host = newOptions.host;\r\n\r\n\tlet server: https.Server | http.Server;\r\n\r\n\tconst { ssl, ...restOptions } = newOptions;\r\n\tif (ssl && Object.keys(ssl).length) {\r\n\t\tserver = https.createServer(ssl, app);\r\n\r\n\t\tnewOptions = restOptions;\r\n\t} else {\r\n\t\tserver = http.createServer(app);\r\n\t}\r\n\r\n\tconst peerjs = ExpressPeerServer(server, newOptions);\r\n\tapp.use(peerjs);\r\n\r\n\tserver.listen(port, host, () => callback?.(server));\r\n\r\n\treturn peerjs;\r\n}\r\n\r\nexport { ExpressPeerServer, PeerServer };\r\n"],"names":[],"version":3,"file":"peer.d.ts.map","sourceRoot":"../"}